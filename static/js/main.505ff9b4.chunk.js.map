{"version":3,"sources":["components/TodoItem/todo.item.module.scss","components/TodoList/todo.list.module.scss","components/TodoItemForm/todo.item.form.module.scss","app.module.scss","ui-kit/Input/input.module.scss","ui-kit/Input/Input.tsx","components/TodoItem/TodoItem.tsx","components/TodoItemForm/TodoItemForm.tsx","components/TodoList/TodoList.tsx","utils/useLocalStorageState.ts","utils/useId.ts","App.tsx","index.tsx"],"names":["module","exports","Input","props","value","onChange","placeholder","event","target","className","styles","input","TodoItem","id","title","isCompleted","handleRemoveItem","handleEditItem","React","useState","isEdit","setIsEdit","editedTitle","setEditedTitle","todoItem","checked","type","checkbox","completed","disabled","onClick","TodoItemForm","handleAddItem","taskTitle","setTaskTitle","formWrapper","button","TodoList","key","defaultValue","valueInLocalStorage","window","localStorage","getItem","JSON","parse","state","setState","prevKeyRef","useRef","useEffect","prevKey","current","removeItem","setItem","stringify","useLocalStorageState","tasks","setTasks","sortedTasks","useMemo","sortBy","reverse","filteredTasks","filter","item","newTitle","find","newItem","newTasks","itemsList","map","listWrapper","array","ids","i","length","Math","max","tasksCopy","divider","todoList","App","root","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"gGACAA,EAAOC,QAAU,CAAC,SAAW,4BAA4B,MAAQ,yBAAyB,UAAY,6BAA6B,SAAW,8B,iBCA9ID,EAAOC,QAAU,CAAC,YAAc,+BAA+B,SAAW,4BAA4B,QAAU,6B,iBCAhHD,EAAOC,QAAU,CAAC,YAAc,oCAAoC,OAAS,iC,kBCA7ED,EAAOC,QAAU,CAAC,KAAO,kBAAkB,eAAiB,8B,gBCA5DD,EAAOC,QAAU,CAAC,MAAQ,uB,0KCQnB,SAASC,EAAMC,GACpB,IAAQC,EAAiCD,EAAjCC,MAAOC,EAA0BF,EAA1BE,SAAUC,EAAgBH,EAAhBG,YACzB,OACE,uBACEF,MAAOA,EACPC,SAAU,SAACE,GAAD,OAAgDF,EAASE,EAAMC,OAAOJ,QAChFK,UAAWC,IAAOC,MAClBL,YAAaA,I,oBCJZ,SAASM,EAAST,GACvB,IAAQU,EAA6DV,EAA7DU,GAAIC,EAAyDX,EAAzDW,MAAOC,EAAkDZ,EAAlDY,YAAaC,EAAqCb,EAArCa,iBAAkBC,EAAmBd,EAAnBc,eAElD,EAA4BC,IAAMC,UAAkB,GAApD,mBAAOC,EAAP,KAAeC,EAAf,KACA,EAAsCH,IAAMC,SAAiBL,GAA7D,mBAAOQ,EAAP,KAAoBC,EAApB,KAWA,OACE,qBAAId,UAAWC,IAAOc,SAAtB,UACE,uBAAOC,QAASV,EAAaV,SAAU,WALzCY,EAAeJ,EAAIC,GAAQC,IAKsCW,KAAK,WAAWjB,UAAWC,IAAOiB,WAChGP,EACC,cAAClB,EAAD,CAAOE,MAAOkB,EAAajB,SAAUkB,IAErC,qBAAKd,UAAS,UAAKC,IAAOI,MAAZ,YAAqBC,EAAcL,IAAOkB,UAAY,IAApE,SAA2Ed,IAE7E,wBAAQe,SAAUd,EAAae,QAAS,kBAhBtCV,GAAQH,EAAeJ,EAAIS,EAAaP,QAC5CM,GAAWD,IAeT,SACGA,EAAS,SAAW,SAEvB,wBAAQU,QAAS,kBAAMd,EAAiBH,IAAxC,qB,4CC7BC,SAASkB,EAAa5B,GAC3B,IAAQ6B,EAAkB7B,EAAlB6B,cACR,EAAkCd,IAAMC,SAAiB,IAAzD,mBAAOc,EAAP,KAAkBC,EAAlB,KAQA,OACE,sBAAKzB,UAAWC,IAAOyB,YAAvB,UACE,cAACjC,EAAD,CAAOE,MAAO6B,EAAW5B,SAAU6B,EAAc5B,YAAY,2BAC7D,wBAAQwB,QATc,WACnBG,IACLD,EAAcC,GACdC,EAAa,MAMyBzB,UAAWC,IAAO0B,OAAtD,yBCbC,SAASC,IACd,MCPK,SAAiCC,EAAaC,GACnD,MAA0BrB,IAAMC,UAAY,WAC1C,IAAMqB,EAAsBC,OAAOC,aAAaC,QAAQL,GACxD,OAAIE,EACKI,KAAKC,MAAML,GAEW,oBAAjBD,EAA8BA,IAAiBA,KAL/D,mBAAOO,EAAP,KAAcC,EAAd,KAQMC,EAAa9B,IAAM+B,OAAOX,GAWhC,OATApB,IAAMgC,WAAU,WACd,IAAMC,EAAUH,EAAWI,QACvBD,IAAYb,GACdG,OAAOC,aAAaW,WAAWF,GAEjCH,EAAWI,QAAUd,EACrBG,OAAOC,aAAaY,QAAQhB,EAAKM,KAAKW,UAAUT,MAC/C,CAACR,EAAKQ,IAEF,CAACA,EAAOC,GDbWS,CAAqC,QAAS,IAAxE,mBAAOC,EAAP,KAAcC,EAAd,KAEMC,EAAczC,IAAM0C,SAAQ,kBAAMC,iBAAOJ,EAAO,SAASK,YAAW,CAACL,IASrEzC,EAAmB,SAACH,GACxB,IAAMkD,EAAgBN,EAAMO,QAAO,SAACC,GAAD,OAAUA,EAAKpD,KAAOA,KACzD6C,EAASK,IAGL9C,EAAiB,SAACJ,EAAYqD,EAAkBnD,GACpD,IAAMkD,EAAOR,EAAMU,MAAK,SAACF,GAAD,OAAUA,EAAKpD,KAAOA,KAE9C,GAAKoD,IAEDA,EAAKnD,QAAUoD,GAAYD,EAAKlD,cAAgBA,GAApD,CAEA,IAAMqD,EAAO,2BAAQH,GAAR,IAAcnD,MAAOoD,EAAUnD,gBACtCgD,EAAgBN,EAAMO,QAAO,SAACC,GAAD,OAAUA,EAAKpD,KAAOA,KACnDwD,EAAQ,sBAAON,GAAP,CAAsBK,IACpCV,EAASW,KAGLC,EAAYX,EAAYY,KAAI,SAACN,GAAD,OAChC,cAACrD,EAAD,CAEEC,GAAIoD,EAAKpD,GACTC,MAAOmD,EAAKnD,MACZC,YAAakD,EAAKlD,YAClBC,iBAAkBA,EAClBC,eAAgBA,GALXgD,EAAKpD,OASd,OACE,sBAAKJ,UAAWC,IAAO8D,YAAvB,UACE,cAACzC,EAAD,CAAcC,cAtCI,SAAClB,GACrB,IEfkB2D,EFeZC,EAAMjB,EAAMc,KAAI,SAACI,GAAD,OAAOA,EAAE9D,MACzBoD,EAAO,CAAEpD,IEhBG4D,EFgBOC,EEfvBD,EAAMG,QAAU,EAAU,EACZC,KAAKC,IAAL,MAAAD,KAAI,YAAQJ,IACX,GFac3D,QAAOC,aAAa,GAC7CgE,EAAS,sBAAOtB,GAAP,CAAcQ,IAC7BP,EAASqB,MAoCP,qBAAKtE,UAAWC,IAAOsE,UAEvB,oBAAIvE,UAAWC,IAAOuE,SAAtB,SAAiCX,OG5CxBY,MARf,WACE,OACE,qBAAKzE,UAAWC,IAAOyE,KAAvB,SACE,cAAC9C,EAAD,OCFN+C,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.505ff9b4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"todoItem\":\"todo_item_todoItem__3Y-7e\",\"title\":\"todo_item_title__26RoT\",\"completed\":\"todo_item_completed__Lm98E\",\"checkbox\":\"todo_item_checkbox__iCubo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"listWrapper\":\"todo_list_listWrapper__19v7q\",\"todoList\":\"todo_list_todoList__1Nnaz\",\"divider\":\"todo_list_divider__1z1SR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formWrapper\":\"todo_item_form_formWrapper__w0LiZ\",\"button\":\"todo_item_form_button__3BJsI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"app_root__2_qmO\",\"contentWrapper\":\"app_contentWrapper__23TUA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"input_input__3zcPz\"};","import React from \"react\";\nimport styles from \"./input.module.scss\";\n\ninterface InputProps {\n  value: string;\n  onChange: (value: string) => void;\n  placeholder?: string;\n}\n\nexport function Input(props: InputProps) {\n  const { value, onChange, placeholder } = props;\n  return (\n    <input\n      value={value}\n      onChange={(event: React.ChangeEvent<HTMLInputElement>) => onChange(event.target.value)}\n      className={styles.input}\n      placeholder={placeholder}\n    />\n  );\n}\n","import React from \"react\";\nimport { TodoTaskItem } from \"../../types/TodoTaskItem\";\nimport { Input } from \"../../ui-kit/Input\";\nimport styles from \"./todo.item.module.scss\";\n\ninterface TodoItemProps extends TodoTaskItem {\n  /** Коллбэк, удаляющий задачу */\n  handleRemoveItem: (id: number) => void;\n  /** Коллбэк, редактирующий задачу */\n  handleEditItem: (id: number, value: string, isCompleted: boolean) => void;\n}\n\nexport function TodoItem(props: TodoItemProps) {\n  const { id, title, isCompleted, handleRemoveItem, handleEditItem } = props;\n\n  const [isEdit, setIsEdit] = React.useState<boolean>(false);\n  const [editedTitle, setEditedTitle] = React.useState<string>(title);\n\n  const handleEdit = () => {\n    if (isEdit) handleEditItem(id, editedTitle, isCompleted);\n    setIsEdit(!isEdit);\n  };\n\n  const handleComplete = () => {\n    handleEditItem(id, title, !isCompleted);\n  };\n\n  return (\n    <li className={styles.todoItem}>\n      <input checked={isCompleted} onChange={() => handleComplete()} type=\"checkbox\" className={styles.checkbox} />\n      {isEdit ? (\n        <Input value={editedTitle} onChange={setEditedTitle} />\n      ) : (\n        <div className={`${styles.title} ${isCompleted ? styles.completed : \"\"}`}>{title}</div>\n      )}\n      <button disabled={isCompleted} onClick={() => handleEdit()}>\n        {isEdit ? \"submit\" : \"edit\"}\n      </button>\n      <button onClick={() => handleRemoveItem(id)}>×</button>\n    </li>\n  );\n}\n","import React from \"react\";\nimport styles from \"./todo.item.form.module.scss\";\nimport { Input } from \"../../ui-kit/Input\";\n\ninterface TodoItemFormProps {\n  /** Коллбэк, обрабатывающий создание задачи */\n  handleAddItem: (title: string) => void;\n}\n\nexport function TodoItemForm(props: TodoItemFormProps) {\n  const { handleAddItem } = props;\n  const [taskTitle, setTaskTitle] = React.useState<string>(\"\");\n\n  const handleButtonClick = () => {\n    if (!taskTitle) return;\n    handleAddItem(taskTitle);\n    setTaskTitle(\"\");\n  };\n\n  return (\n    <div className={styles.formWrapper}>\n      <Input value={taskTitle} onChange={setTaskTitle} placeholder=\"What needs to be done?\" />\n      <button onClick={handleButtonClick} className={styles.button}>\n        Add task\n      </button>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { TodoItem } from \"../TodoItem\";\nimport { sortBy } from \"lodash\";\nimport styles from \"./todo.list.module.scss\";\nimport { TodoItemForm } from \"../TodoItemForm\";\nimport { useLocalStorageState } from \"../../utils/useLocalStorageState\";\nimport { useId } from \"../../utils/useId\";\nimport { TodoTaskItem } from \"../../types/TodoTaskItem\";\n\nexport function TodoList() {\n  const [tasks, setTasks] = useLocalStorageState<TodoTaskItem[]>(\"tasks\", []);\n\n  const sortedTasks = React.useMemo(() => sortBy(tasks, \"title\").reverse(), [tasks]);\n\n  const handleAddItem = (title: string) => {\n    const ids = tasks.map((i) => i.id);\n    const item = { id: useId(ids), title, isCompleted: false };\n    const tasksCopy = [...tasks, item];\n    setTasks(tasksCopy);\n  };\n\n  const handleRemoveItem = (id: number) => {\n    const filteredTasks = tasks.filter((item) => item.id !== id);\n    setTasks(filteredTasks);\n  };\n\n  const handleEditItem = (id: number, newTitle: string, isCompleted: boolean) => {\n    const item = tasks.find((item) => item.id === id);\n\n    if (!item) return;\n\n    if (item.title === newTitle && item.isCompleted === isCompleted) return;\n\n    const newItem = { ...item, title: newTitle, isCompleted };\n    const filteredTasks = tasks.filter((item) => item.id !== id);\n    const newTasks = [...filteredTasks, newItem];\n    setTasks(newTasks);\n  };\n\n  const itemsList = sortedTasks.map((item) => (\n    <TodoItem\n      key={item.id}\n      id={item.id}\n      title={item.title}\n      isCompleted={item.isCompleted}\n      handleRemoveItem={handleRemoveItem}\n      handleEditItem={handleEditItem}\n    />\n  ));\n\n  return (\n    <div className={styles.listWrapper}>\n      <TodoItemForm handleAddItem={handleAddItem} />\n\n      <div className={styles.divider} />\n\n      <ul className={styles.todoList}>{itemsList}</ul>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Dispatch, SetStateAction } from \"react\";\n\nexport function useLocalStorageState<T>(key: string, defaultValue: T): [T, Dispatch<SetStateAction<T>>] {\n  const [state, setState] = React.useState<T>(() => {\n    const valueInLocalStorage = window.localStorage.getItem(key);\n    if (valueInLocalStorage) {\n      return JSON.parse(valueInLocalStorage);\n    }\n    return typeof defaultValue === \"function\" ? defaultValue() : defaultValue;\n  });\n\n  const prevKeyRef = React.useRef(key);\n\n  React.useEffect(() => {\n    const prevKey = prevKeyRef.current;\n    if (prevKey !== key) {\n      window.localStorage.removeItem(prevKey);\n    }\n    prevKeyRef.current = key;\n    window.localStorage.setItem(key, JSON.stringify(state));\n  }, [key, state]);\n\n  return [state, setState];\n}\n","export function useId(array: number[]): number {\n  if (array.length <= 0) return 1;\n  const biggestId = Math.max(...array);\n  return biggestId + 1;\n}\n","import React from \"react\";\nimport styles from \"./app.module.scss\";\nimport { TodoList } from \"./components/TodoList\";\n\nfunction App() {\n  return (\n    <div className={styles.root}>\n      <TodoList />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}